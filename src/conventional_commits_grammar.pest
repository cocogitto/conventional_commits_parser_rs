summary_content = { (!NEWLINE ~ ANY)+ }

message = { SOI ~ summary ~ (blank_line ~ body)? ~ (blank_line ~ footers)? ~ EOI }

// <type>[optional scope]: <description>
summary = ${ commit_type ~ scope? ~ breaking_change_mark? ~ type_separator ~ whitespace_terminal ~ summary_content }
commit_type = { ASCII_ALPHA+ }
scope = {  (parent_left ~ scope_content ~ parent_right) }
breaking_change_mark = { "!"? }
scope_content = ${ ( no_parenthesis ~ !NEWLINE ~ ANY)+ }


// [optional body]
body = { (!footer ~ ANY)+ }

// [optional footer(s)]
footers = { footer* }
footer = ${ NEWLINE* ~ token ~ token_separator ~ footer_content }
breaking_change_token = { "BREAKING CHANGE" | "BREAKING-CHANGE" }
token = { breaking_change_token | ( !token_separator ~ ( ASCII_ALPHANUMERIC | "-"))* }
token_separator = { ": " | " #" }
footer_content = { (!footer ~ ANY)+ }

type_separator = { ":" }
whitespace_terminal = { " " }
parent_left = _{ "(" }
parent_right = _{ ")" }
WHITESPACE = _{ " " }
blank_line = _{ NEWLINE ~ WHITESPACE* ~ NEWLINE }

no_parenthesis = { !(parent_right | parent_left)  }
